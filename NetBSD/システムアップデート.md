NetBSD アップデート手順

# 取得

*  ftp で [The NetBSD Guide - Chapter 30. Obtaining the sources](http://www.netbsd.org/docs/guide/en/chap-fetch.html#chap-fetch-tarball-netbsd-release)
*  cvs で [The NetBSD Guide - Chapter 30. Obtaining the sources](http://www.netbsd.org/docs/guide/en/chap-fetch.html#chap-fetch-cvs)
*  構築 [Chapter 33. Updating an existing system from sources](http://www.netbsd.org/docs/guide/en/chap-updating.html)

[NetBSD 構築ガイド](http://www.fml.org/home/fukachan/ja/tech.netbsd.html)

##ftp

    % mkdir NetBSD-6.0

    % ftp -i ftp://ftp4.jp.netbsd.org/pub/NetBSD/NetBSD-6.0/source/sets/
    > mget *
    > quit

    % md5 *
    % cat MD5

    % for f in *.tgz; do tar xzf $f; done
    % mv ./usr/src /usr/
    % cd /usr/src

##cvs

    % export CVS_RSH="ssh"
    % export CVSROOT="anoncvs@anoncvs.NetBSD.org:/cvsroot"
    % cd /usr
    % cvs checkout -r netbsd-6-0-RELEASE -P src

##snapshot

master ftp://nyftp.netbsd.org/pub/NetBSD-daily/HEAD/

mirror Japan ftp://ftp7.jp.netbsd.org/pub/NetBSD-daily/

    % ftp -i ftp://ftp7.jp.netbsd.org/pub/NetBSD-daily/HEAD/201412040930Z/source/sets/
    > mget *
    > quit

#構築

カーネル設定変更

    % cd /usr/src/sys/arch/i386/conf/
    % cp GENERIC MYKERNEL

これだけ追加

    options NMBCLUSTERS=32768

構築

    % cd /usr/src
    % ./build.sh -O ../obj -T ../tools distribution
    % ./build.sh -O ../obj -T ../tools kernel=MYKERNEL
    % cd ../obj/sys/arch/i386/compile/MYKERNEL
    % su
    % mv /netbsd /netbsd.old
    % cp netbsd /netbsd
    % shutdown -r now

    % cd /usr/src
    % su
    % ./build.sh -O ../obj -T ../tools -U install=/

    %  /usr/sbin/etcupdate -s /usr/src
